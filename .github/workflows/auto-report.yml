name: Auto Report (CTR / CVR)

on:
  schedule:
    - cron: '0 23 * * *'  # í•œêµ­ ì˜¤ì „ 8ì‹œ
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: âœ… ë ˆí¬ í´ë¡ 
        uses: actions/checkout@v3

      - name: ğŸ“¦ R ì„¤ì¹˜
        uses: r-lib/actions/setup-r@v2

      - name: ğŸ“ R íŒ¨í‚¤ì§€ ì„¤ì¹˜
        run: |
          Rscript -e 'install.packages(c("ggplot2", "dplyr", "lubridate", "data.table", "gridExtra"))'

      - name: ğŸ“„ auto_report.R ì‹¤í–‰
        run: Rscript auto_report.R

      - name: ğŸš€ GitHub Pagesì— í‘¸ì‹œ
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "actions@github.com"
          git add index.html top_items_report.png
          git commit -m "ğŸ“ˆ ìë™ ë¦¬í¬íŠ¸ ê°±ì‹  $(date '+%Y-%m-%d')" || echo "No changes to commit"
          git push origin main
